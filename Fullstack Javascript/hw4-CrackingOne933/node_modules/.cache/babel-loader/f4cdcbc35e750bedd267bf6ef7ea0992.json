{"ast":null,"code":"import _classCallCheck from\"/Users/braydenarcher/Desktop/Full-Stack Javascript/hw4-CrackingOne933/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/braydenarcher/Desktop/Full-Stack Javascript/hw4-CrackingOne933/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/braydenarcher/Desktop/Full-Stack Javascript/hw4-CrackingOne933/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/braydenarcher/Desktop/Full-Stack Javascript/hw4-CrackingOne933/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React,{Component}from\"react\";import{Link}from\"react-router-dom\";import\"./SearchAPI\";import CourseCard from\"./CourseCard\";import*as SearchAPI from\"./SearchAPI\";import Pagination from\"./Pagination\";import*as CoursesAPI from\"./CoursesAPI\";import Color from\"./Color\";var SearchPage=/*#__PURE__*/function(_Component){_inherits(SearchPage,_Component);var _super=_createSuper(SearchPage);function SearchPage(){var _this;_classCallCheck(this,SearchPage);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={//State for basic stuff that needs to be tracked\ncoursesBeingDisplayed:[],//Courses currently on page\ncoursesCache:[],//Courses that are in the database right now\nresponse:undefined//Contains response object from last request\n};_this.updateQuery=function(){//If the query is updated\nvar value=document.getElementById(\"searchBar\").value;//get query\nif(value===\"\"){//If its empty show nothing\n_this.setState({coursesBeingDisplayed:[],response:undefined});//Update response and coursesBeingDisplayed\nreturn;}SearchAPI.getResponse(value,1,10)//otherwise get response with query and pages value\n.then(function(r){//const newCourses = this.newCoursesList(r.data.data);\nvar newValue=document.getElementById(\"searchBar\").value;//get query again\nif(newValue===value){//if the query is not the same don't update because we don't want dumb results!\n_this.setState({response:r,coursesBeingDisplayed:r.data.data});}});};_this.newCoursesList=function(responseData){//Return a courses list with the correct statuses\nreturn responseData.map(function(course){course.status=\"none\";_this.state.coursesCache.forEach(function(c){//Compare each course in the ones being displayed with the cached ones\n//and if the cached ones match take their status and give it to displayed ones\nif(c.title===course.title&&c.term===course.term&&c.number===course.number){course.status=c.status;}});return course;});};_this.onCourseUpdate=function(course,status){//If a course needs a status update\nif(course.status===\"none\"){//If the status is none add the course cause its not there yet\ncourse.status=status;_this.addCourse(course);return;}var noSkip=true;_this.state.coursesCache.forEach(function(c){//Check each course in cache to get equivalent with ID\nif(c.title===course.title&&c.term===course.term&&c.number===course.number&&noSkip){course=c;noSkip=false;}});var _course=course,_id=_course._id;if(status===\"none\"){//If new status is none then remove\n_this.removeCourse(course);return;}CoursesAPI.updateStatus(_id,status).then(function(c){//Update status with API\nif(c===null){return;}_this.props.removeCourse(c);//remove locally from homepage\n_this.setState(function(state){//set state without the course\nreturn{coursesCache:state.coursesCache.filter(function(c){return c._id!==course._id;})};},function(){course.status=status;//update status\n_this.props.addCourse(c);//add course locally to homepage\n_this.setState({//set state with course again\ncoursesCache:_this.state.coursesCache.concat(c)});});});};_this.addCourse=function(course){//Add course with API and locally\nCoursesAPI.add(course).then(function(c){//Add course to API\nif(c===null){alert(\"Error adding Course\");return;}_this.setState(function(){//Update local courses list\nvar temp=_this.state.coursesCache;temp.push(c);return{courses:temp};},function(){_this.props.addCourse(c);});});};_this.removeCourse=function(course){//Remove the course from API and locally\n_this.setState(function(state){//Remove locally\nreturn{coursesCache:state.coursesCache.filter(function(c){return c._id!==course._id;})};});CoursesAPI.remove(course._id).then(function(r){//Remove from API\nif(r===null){return;}_this.props.removeCourse(r);//Remove course from local homepage\n});};_this.nextPage=function(){//get next page courses from link\nSearchAPI.getResponseWithLink(_this.state.response.data.links.next).then(function(r){var newCourses=_this.newCoursesList(r.data.data);_this.setState({response:r,coursesBeingDisplayed:newCourses});});};_this.previousPage=function(){//get previous page courses from link\nSearchAPI.getResponseWithLink(_this.state.response.data.links.prev).then(function(r){var newCourses=_this.newCoursesList(r.data.data);_this.setState({response:r,coursesBeingDisplayed:newCourses});});};_this.firstPage=function(){//get first page courses from link\nSearchAPI.getResponseWithLink(_this.state.response.data.links.first).then(function(r){var newCourses=_this.newCoursesList(r.data.data);_this.setState({response:r,coursesBeingDisplayed:newCourses});});};_this.lastPage=function(){//get last page courses from link\nSearchAPI.getResponseWithLink(_this.state.response.data.links.last).then(function(r){var newCourses=_this.newCoursesList(r.data.data);_this.setState({response:r,coursesBeingDisplayed:newCourses});});};return _this;}_createClass(SearchPage,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;//On mount get all the courses and cache them to compare\nCoursesAPI.getAll().then(function(courses){return _this2.setState({coursesCache:courses});});}},{key:\"render\",value:function render(){var _this3=this;var coursesBeforeUpdate=this.state.coursesBeingDisplayed;//Get courses list before status update\nvar courses=this.newCoursesList(coursesBeforeUpdate);//get courses list with updated statuses\nvar response=this.state.response===undefined?undefined:this.state.response.data;//Get response data\nvar pagination=response===undefined?undefined:response.pagination;//get pagination data\n//Feed the data to the Course Cards below\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"search-courses\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"search-courses-bar\",children:[/*#__PURE__*/_jsx(Link,{to:\"/\",children:/*#__PURE__*/_jsx(\"button\",{className:\"close-search\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"search-courses-input-wrapper\",children:/*#__PURE__*/_jsx(\"input\",{id:\"searchBar\",type:\"text\",placeholder:\"Search by course title or course number\",onInput:this.updateQuery})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"search-courses-results\",children:[/*#__PURE__*/_jsx(\"ol\",{className:\"courses-grid\",children:courses.map(function(course,index){return/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(CourseCard,{course:course,color:Color.getColor(course.title),props:_this3.props,onCourseUpdate:_this3.onCourseUpdate})},index);})}),/*#__PURE__*/_jsx(\"div\",{className:\"search-courses-buttons\",children:/*#__PURE__*/_jsx(Pagination,{pagination:pagination,nextPage:this.nextPage,previousPage:this.previousPage,firstPage:this.firstPage,lastPage:this.lastPage})})]})]});}}]);return SearchPage;}(Component);export default SearchPage;","map":{"version":3,"sources":["/Users/braydenarcher/Desktop/Full-Stack Javascript/hw4-CrackingOne933/src/Search.js"],"names":["React","Component","Link","CourseCard","SearchAPI","Pagination","CoursesAPI","Color","SearchPage","state","coursesBeingDisplayed","coursesCache","response","undefined","updateQuery","value","document","getElementById","setState","getResponse","then","r","newValue","data","newCoursesList","responseData","map","course","status","forEach","c","title","term","number","onCourseUpdate","addCourse","noSkip","_id","removeCourse","updateStatus","props","filter","concat","add","alert","temp","push","courses","remove","nextPage","getResponseWithLink","links","next","newCourses","previousPage","prev","firstPage","first","lastPage","last","getAll","coursesBeforeUpdate","pagination","index","getColor"],"mappings":"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","sourcesContent":["import React, {Component} from \"react\";\nimport {Link} from \"react-router-dom\";\nimport PropTypes from \"prop-types\";\nimport \"./SearchAPI\"\nimport CourseCard from \"./CourseCard\";\nimport * as SearchAPI from \"./SearchAPI\";\nimport Pagination from \"./Pagination\";\nimport * as CoursesAPI from \"./CoursesAPI\";\nimport Color from \"./Color\";\n\nclass SearchPage extends Component {\n    state = { //State for basic stuff that needs to be tracked\n        coursesBeingDisplayed: [], //Courses currently on page\n        coursesCache: [], //Courses that are in the database right now\n        response: undefined, //Contains response object from last request\n    }\n\n    componentDidMount() { //On mount get all the courses and cache them to compare\n        CoursesAPI.getAll().then((courses) => this.setState({ coursesCache: courses }));\n    }\n\n    updateQuery = () => { //If the query is updated\n        const value = document.getElementById(\"searchBar\").value; //get query\n        if (value === \"\") { //If its empty show nothing\n            this.setState({coursesBeingDisplayed: [], response: undefined}); //Update response and coursesBeingDisplayed\n            return;\n        }\n        SearchAPI.getResponse(value, 1, 10) //otherwise get response with query and pages value\n            .then(r => {\n                //const newCourses = this.newCoursesList(r.data.data);\n                const newValue = document.getElementById(\"searchBar\").value; //get query again\n                if (newValue === value) { //if the query is not the same don't update because we don't want dumb results!\n                    this.setState({ response: r, coursesBeingDisplayed: r.data.data});\n                }\n            });\n    }\n\n\n\n    newCoursesList = (responseData) => { //Return a courses list with the correct statuses\n        return responseData.map((course) => {\n            course.status = \"none\";\n            this.state.coursesCache.forEach((c) => { //Compare each course in the ones being displayed with the cached ones\n                //and if the cached ones match take their status and give it to displayed ones\n                if (c.title === course.title && c.term === course.term && c.number === course.number) {\n                    course.status = c.status;\n                }\n            });\n            return course;\n        });\n    }\n\n    onCourseUpdate = (course, status) => { //If a course needs a status update\n        if (course.status === \"none\") { //If the status is none add the course cause its not there yet\n            course.status = status;\n            this.addCourse(course);\n            return;\n        }\n        let noSkip = true;\n        this.state.coursesCache.forEach((c) => { //Check each course in cache to get equivalent with ID\n            if (c.title === course.title && c.term === course.term && c.number === course.number && noSkip) {\n                course = c;\n                noSkip = false;\n            }\n        });\n\n        const { _id } = course;\n        if (status === \"none\") { //If new status is none then remove\n            this.removeCourse(course);\n            return;\n        }\n        CoursesAPI.updateStatus(_id, status).then(c => { //Update status with API\n            if (c === null) {\n                return;\n            }\n            this.props.removeCourse(c); //remove locally from homepage\n            this.setState((state) => { //set state without the course\n                return {\n                    coursesCache: state.coursesCache.filter((c) => c._id !== course._id),\n                };\n            }, () => {\n                course.status = status; //update status\n                this.props.addCourse(c); //add course locally to homepage\n                this.setState({ //set state with course again\n                    coursesCache: this.state.coursesCache.concat(c)\n                });\n            });\n        });\n\n    }\n\n    addCourse = (course) => { //Add course with API and locally\n        CoursesAPI.add(course).then((c) => { //Add course to API\n            if (c === null) {\n                alert(\"Error adding Course\");\n                return;\n            }\n            this.setState(() => { //Update local courses list\n                const temp = this.state.coursesCache;\n                temp.push(c);\n                return {courses: temp};\n            }, ()=> {\n                this.props.addCourse(c);\n            });\n        });\n    };\n\n    removeCourse = (course) => { //Remove the course from API and locally\n        this.setState((state) => { //Remove locally\n            return {\n                coursesCache: state.coursesCache.filter((c) => c._id !== course._id),\n            };\n        });\n        CoursesAPI.remove(course._id).then(r => { //Remove from API\n            if (r === null) {\n                return;\n            }\n            this.props.removeCourse(r); //Remove course from local homepage\n        });\n    };\n\n    nextPage = () => { //get next page courses from link\n        SearchAPI.getResponseWithLink(this.state.response.data.links.next)\n            .then(r => {\n                const newCourses = this.newCoursesList(r.data.data);\n                this.setState({ response: r, coursesBeingDisplayed: newCourses});\n            });\n    }\n\n    previousPage = () => { //get previous page courses from link\n        SearchAPI.getResponseWithLink(this.state.response.data.links.prev)\n            .then(r => {\n                const newCourses = this.newCoursesList(r.data.data);\n                this.setState({ response: r, coursesBeingDisplayed: newCourses});\n            });\n    }\n\n    firstPage = () => { //get first page courses from link\n        SearchAPI.getResponseWithLink(this.state.response.data.links.first)\n            .then(r => {\n                const newCourses = this.newCoursesList(r.data.data);\n                this.setState({ response: r, coursesBeingDisplayed: newCourses});\n            });\n    }\n\n    lastPage = () => { //get last page courses from link\n        SearchAPI.getResponseWithLink(this.state.response.data.links.last)\n            .then(r => {\n                const newCourses = this.newCoursesList(r.data.data);\n                this.setState({ response: r, coursesBeingDisplayed: newCourses});\n            });\n    }\n\n    render() {\n        const coursesBeforeUpdate = this.state.coursesBeingDisplayed; //Get courses list before status update\n        const courses = this.newCoursesList(coursesBeforeUpdate); //get courses list with updated statuses\n\n        const response = this.state.response === undefined ? undefined: this.state.response.data; //Get response data\n        const pagination = response === undefined ? undefined: response.pagination; //get pagination data\n        //Feed the data to the Course Cards below\n        return (\n            <div className=\"search-courses\">\n                <div className=\"search-courses-bar\">\n                    <Link to=\"/\">\n                        <button className=\"close-search\" />\n                    </Link>\n                    <div className=\"search-courses-input-wrapper\">\n                        <input\n                            id=\"searchBar\"\n                            type=\"text\"\n                            placeholder=\"Search by course title or course number\"\n                            onInput={this.updateQuery}\n                        />\n                    </div>\n                </div>\n                <div className=\"search-courses-results\">\n                    <ol className=\"courses-grid\">\n                        {\n                            courses.map(\n                                (course, index) => {\n                                    return (<li key={index}>\n                                        <CourseCard\n                                            course={course}\n                                            color={Color.getColor(course.title)}\n                                            props={this.props}\n                                            onCourseUpdate={this.onCourseUpdate}\n                                        />\n                                    </li>);\n                                }\n                            )\n                        }\n                    </ol>\n                    <div className=\"search-courses-buttons\">\n                        <Pagination\n                            pagination={pagination}\n                            nextPage={this.nextPage}\n                            previousPage={this.previousPage}\n                            firstPage={this.firstPage}\n                            lastPage={this.lastPage}\n                        />\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default SearchPage;\n\nSearchPage.propTypes = { //Prop stuff\n    onCourseUpdate: PropTypes.func.isRequired,\n    getCourses: PropTypes.func.isRequired,\n    addCourse: PropTypes.func.isRequired,\n    removeCourse: PropTypes.func.isRequired\n};\n"]},"metadata":{},"sourceType":"module"}