(this["webpackJsonpcourses-app"]=this["webpackJsonpcourses-app"]||[]).push([[0],{39:function(e,t,r){},67:function(e,t,r){},68:function(e,t,r){"use strict";r.r(t);var n=r(0),s=r(32),a=r.n(s),c=r(14),o=r(15),u=r(17),i=r(16),l=r(1),d=r.n(l),h=r(2),p=(r(39),r(4)),j=r.n(p),b=r(9),f=r(10),v=r.n(f);r(31).config();var x="https://courses-api-hw4.herokuapp.com",m={Authorization:"barcher9"};function O(){return g.apply(this,arguments)}function g(){return(g=Object(b.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.a.get("".concat(x,"/api/courses"),{headers:m});case 3:return t=e.sent,e.abrupt("return",t.data.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",[]);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function C(e){return y.apply(this,arguments)}function y(){return(y=Object(b.a)(j.a.mark((function e(t){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.a.delete("".concat(x,"/api/courses/").concat(t),{headers:m});case 3:return r=e.sent,e.abrupt("return",r.data.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function k(e){return S.apply(this,arguments)}function S(){return(S=Object(b.a)(j.a.mark((function e(t){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.a.post("".concat(x,"/api/courses"),t,{headers:m});case 3:return r=e.sent,e.abrupt("return",r.data.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function B(e,t){return P.apply(this,arguments)}function P(){return(P=Object(b.a)(j.a.mark((function e(t,r){var n,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={status:r},e.prev=1,e.next=4,v.a.patch("".concat(x,"/api/courses/").concat(t),n,{headers:m});case 4:return s=e.sent,e.abrupt("return",s.data.data);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",null);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}var w=r(12);r(31).config();var D="https://courses-api-hw4.herokuapp.com",G={Authorization:"barcher9"};function L(e,t,r){return N.apply(this,arguments)}function N(){return(N=Object(b.a)(j.a.mark((function e(t,r,n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.a.get("".concat(D,"/api/search?query=").concat(t,"&page=").concat(r,"&limit=").concat(n),{headers:G});case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",[]);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function M(e){return _.apply(this,arguments)}function _(){return(_=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.a.get(t,{headers:G});case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",[]);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}var R=function(e){var t=e.course;return Object(n.jsxs)("select",{value:t.status,onChange:function(r){e.onCourseUpdate(t,r.target.value)},children:[Object(n.jsx)("option",{value:"move",disabled:!0,children:"Move to..."}),Object(n.jsx)("option",{value:"enrolled",children:"Currently Enrolled"}),Object(n.jsx)("option",{value:"interested",children:"Want to Take"}),Object(n.jsx)("option",{value:"taken",children:"Already Took"}),Object(n.jsx)("option",{value:"none",children:"None"})]})},U=["AntiqueWhite","Aqua","Aquamarine","Bisque","Black","BlanchedAlmond","Blue","BlueViolet","Brown","BurlyWood","CadetBlue","Chartreuse","Chocolate","Coral","CornflowerBlue","Crimson","DarkBlue","DarkCyan","DarkGoldenRod","DarkGray","DarkGrey","DarkGreen","DarkKhaki","DarkMagenta","DarkOliveGreen","DarkOrange","DarkOrchid","DarkRed","DarkSalmon","DarkSeaGreen","DarkSlateBlue","DarkSlateGray","DarkSlateGrey","DarkTurquoise","DarkViolet","DeepPink","DeepSkyBlue","DimGray","DimGrey","DodgerBlue","FireBrick","ForestGreen","Fuchsia","Gainsboro","Gold","Gray","Grey","Green","GreenYellow","HotPink","IndianRed","Indigo","Khaki","Lavender","LavenderBlush","LawnGreen","LemonChiffon","LightBlue","LightCoral","LightGoldenRodYellow","LightGray","LightGrey","LightGreen","LightPink","LightSeaGreen","LightSkyBlue","LightSlateGray","LightSlateGrey","LightSteelBlue","Lime","LimeGreen","Linen","Magenta","Maroon","MediumAquaMarine","MediumBlue","MediumOrchid","MediumPurple","MediumSeaGreen","MediumSlateBlue","MediumSpringGreen","MediumTurquoise","MediumVioletRed","MidnightBlue","MistyRose","Moccasin","NavajoWhite","Navy","OldLace","Olive","OliveDrab","Orange","OrangeRed","Orchid","PaleGoldenRod","PaleGreen","PaleTurquoise","PaleVioletRed","PapayaWhip","PeachPuff","Peru","Pink","Plum","PowderBlue","Purple","RebeccaPurple","Red","RosyBrown","RoyalBlue","SaddleBrown","Salmon","SandyBrown","SeaGreen","SeaShell","Sienna","Silver","SkyBlue","SlateBlue","SlateGray","SlateGrey","SpringGreen","SteelBlue","Tan","Teal","Thistle","Tomato","Turquoise","Violet","Wheat","Yellow","YellowGreen"],A=[],T=new Map([]);var q={getColor:function(e){var t,r=U.length;if(0===r&&(U=A,A=[]),T.has(e))t=T.get(e);else{var n=Math.floor(Math.random()*r);T.set(e,U[n]),t=U[n],A.push(U.splice(n,1))}return t}};var F=function(e){var t=e.course;return Object(n.jsxs)("div",{className:"course",children:[Object(n.jsxs)("div",{className:"course-top",children:[Object(n.jsxs)("svg",{className:"course-logo",children:[Object(n.jsx)("rect",{x:0,y:0,width:128,height:128,fill:q.getColor(t.title)}),Object(n.jsxs)("text",{x:"50%",y:"35%",textAnchor:"middle",dominantBaseline:"middle",fill:"white",fontFamily:"monospace",fontSize:"2.2em",children:[Object(n.jsx)("tspan",{x:"50%",dy:"0",children:t.number.split(".")[0]}),Object(n.jsx)("tspan",{x:"50%",dy:"1.2em",children:t.number.split(".")[1]})]})]}),Object(n.jsx)("div",{className:"course-status-changer",children:Object(n.jsx)(R,{course:t,props:e,onCourseUpdate:e.onCourseUpdate})})]}),Object(n.jsx)("div",{className:"course-title",children:t.title}),Object(n.jsx)("div",{className:"course-term",children:t.term})]})};var E=function(e){if(void 0===e.pagination)return null;var t=e.pagination.page,r=e.pagination.last;return 1===r||0===r?null:2===r&&2===t?Object(n.jsxs)(d.a.Fragment,{children:[Object(n.jsx)("button",{onClick:e.firstPage,children:" 1 "}),Object(n.jsx)("button",{disabled:!0,children:" 2 "})]}):2===r&&1===t?Object(n.jsxs)(d.a.Fragment,{children:[Object(n.jsx)("button",{disabled:!0,children:" 1 "}),Object(n.jsx)("button",{onClick:e.lastPage,children:" 2 "})]}):r===t?Object(n.jsxs)(d.a.Fragment,{children:[Object(n.jsx)("button",{onClick:e.firstPage,children:" 1 "}),Object(n.jsxs)("button",{onClick:e.previousPage,children:[" ","<"," "]}),Object(n.jsxs)("button",{disabled:!0,children:[" ",t," "]})]}):1===t&&1!==r?Object(n.jsxs)(d.a.Fragment,{children:[Object(n.jsx)("button",{disabled:!0,children:" 1 "}),Object(n.jsx)("button",{onClick:e.nextPage,children:" > "}),Object(n.jsxs)("button",{onClick:e.lastPage,children:[" ",r," "]})]}):2===t?Object(n.jsxs)(d.a.Fragment,{children:[Object(n.jsx)("button",{onClick:e.firstPage,children:" 1 "}),Object(n.jsx)("button",{disabled:!0,children:" 2 "}),Object(n.jsx)("button",{onClick:e.nextPage,children:" > "}),Object(n.jsxs)("button",{onClick:e.lastPage,children:[" ",r," "]})]}):Object(n.jsxs)(d.a.Fragment,{children:[Object(n.jsx)("button",{onClick:e.firstPage,children:" 1 "}),Object(n.jsxs)("button",{onClick:e.previousPage,children:[" ","<"," "]}),Object(n.jsxs)("button",{disabled:!0,children:[" ",t," "]}),Object(n.jsx)("button",{onClick:e.nextPage,children:" > "}),Object(n.jsxs)("button",{onClick:e.lastPage,children:[" ",r," "]})]})},W=function(e){Object(u.a)(r,e);var t=Object(i.a)(r);function r(){var e;Object(c.a)(this,r);for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={coursesBeingDisplayed:[],coursesCache:[],response:void 0},e.updateQuery=function(){var t=document.getElementById("searchBar").value;""!==t?L(t,1,10).then((function(r){document.getElementById("searchBar").value===t&&e.setState({response:r,coursesBeingDisplayed:r.data.data})})):e.setState({coursesBeingDisplayed:[],response:void 0})},e.newCoursesList=function(t){return t.map((function(t){return t.status="none",e.state.coursesCache.forEach((function(e){e.title===t.title&&e.term===t.term&&e.number===t.number&&(t.status=e.status)})),t}))},e.onCourseUpdate=function(t,r){if("none"===t.status)return t.status=r,void e.addCourse(t);var n=!0;e.state.coursesCache.forEach((function(e){e.title===t.title&&e.term===t.term&&e.number===t.number&&n&&(t=e,n=!1)}));var s=t._id;"none"!==r?B(s,r).then((function(n){null!==n&&(e.props.removeCourse(n),e.setState((function(e){return{coursesCache:e.coursesCache.filter((function(e){return e._id!==t._id}))}}),(function(){t.status=r,e.props.addCourse(n),e.setState({coursesCache:e.state.coursesCache.concat(n)})})))})):e.removeCourse(t)},e.addCourse=function(t){k(t).then((function(t){null!==t?e.setState((function(){var r=e.state.coursesCache;return r.push(t),{courses:r}}),(function(){e.props.addCourse(t)})):alert("Error adding Course")}))},e.removeCourse=function(t){e.setState((function(e){return{coursesCache:e.coursesCache.filter((function(e){return e._id!==t._id}))}})),C(t._id).then((function(t){null!==t&&e.props.removeCourse(t)}))},e.nextPage=function(){M(e.state.response.data.links.next).then((function(t){var r=e.newCoursesList(t.data.data);e.setState({response:t,coursesBeingDisplayed:r})}))},e.previousPage=function(){M(e.state.response.data.links.prev).then((function(t){var r=e.newCoursesList(t.data.data);e.setState({response:t,coursesBeingDisplayed:r})}))},e.firstPage=function(){M(e.state.response.data.links.first).then((function(t){var r=e.newCoursesList(t.data.data);e.setState({response:t,coursesBeingDisplayed:r})}))},e.lastPage=function(){M(e.state.response.data.links.last).then((function(t){var r=e.newCoursesList(t.data.data);e.setState({response:t,coursesBeingDisplayed:r})}))},e}return Object(o.a)(r,[{key:"componentDidMount",value:function(){var e=this;O().then((function(t){return e.setState({coursesCache:t})}))}},{key:"render",value:function(){var e=this,t=this.state.coursesBeingDisplayed,r=this.newCoursesList(t),s=void 0===this.state.response?void 0:this.state.response.data,a=void 0===s?void 0:s.pagination;return Object(n.jsxs)("div",{className:"search-courses",children:[Object(n.jsxs)("div",{className:"search-courses-bar",children:[Object(n.jsx)(w.b,{to:"/",children:Object(n.jsx)("button",{className:"close-search"})}),Object(n.jsx)("div",{className:"search-courses-input-wrapper",children:Object(n.jsx)("input",{id:"searchBar",type:"text",placeholder:"Search by course title or course number",onInput:this.updateQuery})})]}),Object(n.jsxs)("div",{className:"search-courses-results",children:[Object(n.jsx)("ol",{className:"courses-grid",children:r.map((function(t,r){return Object(n.jsx)("li",{children:Object(n.jsx)(F,{course:t,color:q.getColor(t.title),props:e.props,onCourseUpdate:e.onCourseUpdate})},r)}))}),Object(n.jsx)("div",{className:"search-courses-buttons",children:Object(n.jsx)(E,{pagination:a,nextPage:this.nextPage,previousPage:this.previousPage,firstPage:this.firstPage,lastPage:this.lastPage})})]})]})}}]),r}(l.Component),I=new Map([["enrolled","Currently Enrolled"],["taken","Already Took"],["interested","Want to Take"]]);var V=function(e){var t=e.status,r=e.courses.filter((function(e){return e.status===t}));return Object(n.jsxs)("div",{className:"dashboard",children:[Object(n.jsx)("h2",{className:"dashboard-title",children:I.get(t)}),Object(n.jsx)("div",{className:"dashboard-courses",children:Object(n.jsx)("ol",{className:"courses-grid",children:r.map((function(t,r){return Object(n.jsx)("li",{children:Object(n.jsx)(F,{course:t,props:e,onCourseUpdate:e.onCourseUpdate})},r)}))})})]})},Y=["enrolled","interested","taken"],z=function(e){Object(u.a)(r,e);var t=Object(i.a)(r);function r(){var e;Object(c.a)(this,r);for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={courses:[]},e.onCourseUpdate=function(t,r){var n=t._id;"none"!==r?B(n,r).then((function(r){null!==r&&e.setState((function(e){return{courses:e.courses.filter((function(e){return e._id!==t._id}))}}),(function(){e.setState({courses:e.state.courses.concat(r)})}))})):e.removeCourse(t)},e.addCourse=function(t){k(t).then((function(t){null!==t&&e.setState({courses:e.state.courses.concat(t)})}))},e.addCourseLocally=function(t){e.setState({courses:e.state.courses.concat(t)})},e.removeCourse=function(t){e.setState((function(e){return{courses:e.courses.filter((function(e){return e._id!==t._id}))}})),C(t._id).then((function(e){}))},e.removeCourseLocally=function(t){e.setState((function(e){return{courses:e.courses.filter((function(e){return e._id!==t._id}))}}))},e.getCourses=function(){return e.state.courses},e}return Object(o.a)(r,[{key:"componentDidMount",value:function(){var e=this;O().then((function(t){return e.setState({courses:t})}))}},{key:"render",value:function(){var e=this,t=this.state.courses;return Object(n.jsx)("div",{className:"app",children:Object(n.jsxs)(h.c,{children:[Object(n.jsx)(h.a,{exact:!0,path:"/",children:Object(n.jsxs)("div",{className:"list-courses",children:[Object(n.jsx)("div",{className:"list-courses-title",children:Object(n.jsx)("h1",{children:"My Courses"})}),Object(n.jsx)("div",{className:"list-courses-content",children:Object(n.jsx)("div",{children:Y.map((function(r,s){return Object(n.jsx)(V,{courses:t,status:r,onCourseUpdate:e.onCourseUpdate},s)}))})}),Object(n.jsx)("div",{className:"open-search",children:Object(n.jsx)(w.b,{to:"/search",children:Object(n.jsx)("button",{})})})]})}),Object(n.jsx)(h.a,{exact:!0,path:"/search",children:Object(n.jsx)(W,{onCourseUpdate:this.onCourseUpdate,getCourses:this.getCourses,addCourse:this.addCourseLocally,removeCourse:this.removeCourseLocally})})]})})}}]),r}(l.Component);r(67);a.a.render(Object(n.jsx)(w.a,{children:Object(n.jsx)(z,{})}),document.getElementById("root"))}},[[68,1,2]]]);
//# sourceMappingURL=main.3d794d58.chunk.js.map